(fun (boot/print-int x y n)
  (mem buf 40)
  (var end (+ buf 40))
  (var ptr end)
  (set ptr (- ptr 1))
  (set (u8 ptr) 0)
  (label loop)
  (set ptr (- ptr 1))
  (set (u8 ptr) (+ (% n 10) 48))
  (set n (/ n 10))
  (if n (goto loop))
  (gfx/text x y ptr))

(fun (boot/fac n)
  (if (< n 2)
      n
      (* n (boot/fac (- n 1)))))

(fun (boot/main)
  (mem ctxt gfx/context)
  (mem gfx gfx/gfx)
  (set context ctxt)
  (set (gfx/ctxt-gfx context) gfx)
  (gfx/init)
  (gfx/rect 0 0 1024 768 (gfx/color 255 255 255))

  (var n 1)
  (var skip (- (gfx/font-ascent sys/mono) (gfx/font-descent sys/mono)))
  (while (< n 20)
   (boot/print-int 10 (* n skip) (boot/fac n))
   (set n (+ n 1)))

  (gfx/show)
  (gfx/wait))
